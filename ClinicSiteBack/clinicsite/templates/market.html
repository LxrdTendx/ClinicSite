{% load static %}
{% block content %}

<style>
      * {
      font-style: normal;
    }
    body{
        /*background: gray;*/
        margin: 0;
        padding: 0;
        zoom: 80%;
        background: var(--main-white, #F5F5F5)
    }
    @font-face {
        font-family: 'Gropled';
        src: url('/static/fonts/Gropled-Bold.otf') format('opentype');
        font-weight: 700;
        font-style: normal;
    }
    @font-face {
        font-family: 'TT Fors';
        src: url('/static/fonts/TT Fors Trial Variable.ttf') format('truetype');
        font-weight: 400; /* Normal */
        font-style: normal;
    }
    @media (min-width: 1920px) {
        body {
            zoom: 100%;
        }
    }
    .header{
        align-items: center;
        transition: width 0.3s ease, border-radius 0.3s ease;
        margin-bottom: 10px;
        margin-top: 10px;
        margin-right: auto;
        margin-left: auto;
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.10);
        width: 73.75%;
        height: 100px;
        background: var(--main-grey, #232323);
        font-family: Fira Sans Condensed, sans-serif;
        font-size: 18px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        position: sticky;
        top: 10px;
        z-index: 10;
        border-radius: 20px;
    }
    .navbar{
        margin-bottom:auto;
        margin-top: auto;
        margin-left: auto;
        margin-right: 80px;
        height: 39px;
        width: auto;
        display: inline-flex;
        justify-content: flex-end;
        align-items: center;
        gap: 20px;
    }
    ul{
        gap: 20px;
        margin: 0;
        width: 100%;
        height: 100%;
        display: flex;
        list-style-type: none;
    }

    ul li{
        width: 95px;

    }
    .logo{
        color: var(--main-white, #F5F5F5);
        font-family: Gropled, sans-serif;
        font-size: 32px;
        font-style: normal;
        font-weight: 700;
        line-height: 100%; /* 32px */
        margin-left: 111px;
        margin-top: auto;
        margin-bottom: auto;
    }
    a{
        text-decoration: none;
        color: white;
    }
    .navbar a, .about-us-link a{
        color: var(--main-light-grey, #585858);
        text-decoration: none;
    }
    .navbar a:hover, .about-us-link a:hover{
        cursor: pointer;
        color: var(--main-grey, #232323);
        transition: 0.5s;
    }


    .main a {
        background-color: var(--main-grey, #232323); /* Фон для 'главная' */
        color: white; /* Цвет текста для 'главная' */
        border-radius: 80px; /* Скругление углов для 'главная' */
        padding: 10px 15px; /* Внутренние отступы для создания обводки */
        display: flex; /* Использование flexbox для центрирования текста */
        align-items: center; /* Центрирование текста по вертикали */
        justify-content: center; /* Центрирование текста по горизонтали */
        width: auto; /* Автоматическая ширина в зависимости от контента и padding */
    }

    /* Стили для остальных пунктов меню */
    .navbar a {
        font-family: "TT Fors", sans-serif;
        color: var(--main-light-grey, #585858);
        display: block;
        text-align: center;
        padding: 10px 15px; /* Одинаковые отступы для всех пунктов */
        border-radius: 80px; /* Скругление углов для всех пунктов */
    }

    /* Стили при наведении для всех пунктов меню */
    .navbar a:hover {
        color: var(--main-grey, #232323);
        background-color: white; /* Фон при наведении */
        text-decoration: none;
    }
    .navbar .active a {

        background-color: white; /* Фон для активного пункта меню */
        color: var(--main-grey, #232323); /* Цвет текста для активного пункта */

    }
    .active{
        font-weight: 700;
        background-color: white; /* Фон для активного пункта меню */
        color: var(--main-grey, #232323); /* Цвет текста для активного пункта */
    }


    .title-page{
        margin-top: 100px;
        width: 73.75%;
        height: 141px;
        margin-right: auto;
        margin-left: auto;

    }
    .title-page-text{
        width: 505px;
        height: 141px;
        color: var(--main-grey, #232323);
        leading-trim: both;
        text-edge: cap;
        font-family: Gropled,sans-serif;
        font-size: 96px;
        font-style: normal;
        font-weight: 700;
        line-height: 80%; /* 76.8px */
    }
    .market{
        width: 73.75%;
        gap: 20px;
        display: block;
        margin-left: auto;
        margin-right: auto;

        height: auto;
        margin-top: 100px;
    }

    .market-sorting{
        top: 130px;
        position: sticky;
        z-index: 10;
        width: 280px;
        height: 549px;
        flex-shrink: 0;
        border-radius: 20px;
        background: var(--main-violet, #A673D8);
    }
    .search-sorting {
        justify-content: space-between;
        width: 880px;
        height: 57px;
        display: flex;
        gap: 20px; /* Расстояние между элементами */
    }
    input[type="search"]::-webkit-search-cancel-button {
        -webkit-appearance: none;
        appearance: none;
    }

    .search input[type="search"] {
        background-color: #f5f5f5;
        width: 480px;
        height: 57px;
        border-radius: 50px;
        border: 1px solid #232323; /* Используем --main-grey как резервный цвет */
        color: #585858; /* Используем --main-light-grey как резервный цвет */
        font-family: 'TT Fors', sans-serif;
        font-size: 18px;
        font-style: normal;
        font-weight: 280;
        line-height: 18px; /* 100% от размера шрифта */
        padding: 0 40px 0px 30px; /* Отступ слева и справа внутри поля поиска */
        outline: none; /* Убираем контур при фокусе */
        background-image: url('/static/searchicon.svg');
        background-repeat: no-repeat;
        background-position: calc(100% - 25px) center;  /* Позиция иконки внутри поля */

    }

    .search input[type="search"]::placeholder {
        color: #585858;
    }

    .sort button {
        border-radius: 50px;
        border: 1px solid #585858; /* Используем --main-light-grey как резервный цвет */
        width: 280px;
        height: 57px;
        color: #585858; /* Используем --main-light-grey как резервный цвет */
        font-family: 'TT Fors', sans-serif;
        font-size: 18px;
        font-style: normal;
        font-weight: 280;
        line-height: 18px; /* 100% от размера шрифта */
        background-color: transparent; /* Прозрачный фон */
        cursor: pointer; /* Курсор в виде руки при наведении */
        background-image: url('/static/sorticon.svg'); /* Путь к вашей иконке */
        background-repeat: no-repeat;
        background-position: calc(100% - 23px) center; /* Иконка справа с отступом в 23px */
         /* Размер иконки */
        padding: 0 150px 0 30px; /* Отступы, учитывая место для иконки */
        outline: none;
    }

    .sort button:hover {
        background-color: #eaeaea; /* Легкий фон при наведении */
    }
    .sort{
        width: 280px;
        height: 57px;
    }
    .search{
        width: 480px;
        height: 57px;
    }
    .card{
        width: 280px;
        height: 452px;
        border-radius: 20px;
        border: 1px solid var(--main-grey, #232323);
        background: var(--main-white, #F5F5F5);
        box-sizing: border-box;
    }
    .card-container {
        display: flex;
        flex-wrap: wrap; /* Позволяет элементам переноситься на новую строку */
        gap: 20px; /* Устанавливает промежуток между карточками */
        justify-content: flex-start; /* Выравнивание карточек по началу контейнера */
        margin-top: 20px; /* Отступ сверху */
    }
    .footer{
        margin-top: 175px;
        margin-left: auto;
        margin-right: auto;
        height: 200px;
        width: 73.75%;
        margin-bottom: 100px;
    }
    .footer {
        background: #F5F5F5; /* Задайте нужный фон */
        border-radius: 20px;
        border: 1px solid #232323;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .footer-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        /*width: 100%; !* Растягиваем на всю ширину футера *!*/
        gap: 3vw;
    }

    .footer-section {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

    .footer-heading {
        color: var(--main-grey, #232323);
        font-family: 'TT Fors',sans-serif;
        font-size: 20px;
        font-style: normal;
        font-weight: 600;
        line-height: 100%;
        margin-bottom: 10px; /* Отступ между заголовком и списком */
    }

    .footer-list {
        display: block;
        list-style: none; /* Убираем маркеры списка */
        padding: 0; /* Убираем отступы у списка */
        margin: 0; /* Убираем внешние отступы у списка */
    }

    .footer-item {
        font-family: 'Inter', sans-serif;
        font-size: 16px;
        font-weight: 300;
        color: #232323;
        margin-bottom: 10px; /* Отступ между элементами списка */
    }

    .footer-title.red {
        color: #F22D3E; /* Красный цвет для названия */
        font-family: 'Gropled',sans-serif;
        font-weight: 700;
    }

    /* Для медиа запросов и адаптивности */
    @media (max-width: 768px) {
        .footer-content {
            flex-direction: column;
        }

        .footer-section {
            margin-bottom: 20px; /* Отступы между секциями в мобильном виде */
        }
    }
        .footer-phone-select {
        background: #F5F5F5; /* Цвет фона выпадающего списка */
        color: #232323; /* Цвет текста */
        font-size: 16px; /* Размер шрифта */
        cursor: pointer; /* Курсор в виде руки */
        border: none;
    }

    /* Стили для элементов option */
    .footer-phone-select option {
        padding: 5px; /* Отступ для каждого элемента списка */
    }
    .type-card{
        width: 187px;
        height: 101px;
        margin-left: 20px;
        margin-top: 30px;
    }
    .price-card{
        margin-left: 20px;
        margin-top: 30px;
        width: 241px;
        height: 69px;
    }

    .count-card{
        width: 230px;
        height: auto;
        margin-left: 20px;
        margin-top: 30px;
    }
    .country-card-text, .price-card-text{
        color: var(--main-white, #F5F5F5);
        font-family: 'TT Fors', sans-serif;
        font-size: 20px;
        font-style: normal;
        font-weight: 600;
        line-height: 100%; /* 20px */
        text-transform: uppercase;
    }
    .type-card-text{
        color: var(--main-white, #F5F5F5);
        font-family: 'TT Fors', sans-serif;
        font-size: 20px;
        font-style: normal;
        font-weight: 600;
        line-height: 100%; /* 20px */
        text-transform: uppercase;

    }
    .type-card-select{
        cursor: pointer;
        color: #000;
        font-size: 18px;
        font-family: 'TT Fors', sans-serif;
        font-weight: 400;
        word-wrap: break-word;
        width: 167px;
        height: 36px;
        font-style: normal;
        line-height: 100%;
    }
    .type-block:hover .type-card-select{
        color: #F5F5F5;
        transition: 0.4s;
    }
    .type-card-select-country{
        cursor: pointer;
        color: #000;
        font-size: 18px;
        font-family: 'TT Fors', sans-serif;
        font-weight: 400;
        word-wrap: break-word;
        font-style: normal;
        line-height: 100%;
    }
    .country-block:hover .type-card-select-country{
        color: #F5F5F5;
        transition: 0.4s;
    }
    .slider {
        position: relative;
        margin-top: 42px;
        margin-left: auto;
        margin-right: auto;
        width: 170px;
        height: 229px;
    }

    .slides {
        height: 214px;
        justify-content: center;
        display: flex;
        overflow: hidden;
    }

    .slide {
        display: none; /* Скрыть все изображения */
        transition: 0.5s; /* Плавная анимация при смене слайдов */
    }

    .slide.active {
        display: block; /* Показать активное изображение */
    }

    .slider-indicators {
        margin-top: 32px;
        gap: 5px;
        display: flex;
        width: 170px;
    }

    .indicator {
        width: 30px;
        height: 3px;
        cursor: pointer;
        border-radius: 50px;
        background: var(--main-light-light-grey, #B5B5B5);
        transition: background-color 0.5s;
    }

    .indicator.active {
        background: var(--main-violet, #A673D8);
    }
    .card-title{
        color: var(--main-grey, #232323);
        font-family: 'TT Fors', sans-serif;
        font-size: 20px;
        font-style: normal;
        font-weight: 600;
        line-height: 100%; /* 20px */
        margin-left: 20px;
        margin-top: 36px;
    }
    .card-subtitle{
        color: var(--main-grey, #232323);
        font-family: 'TT Fors', sans-serif;
        font-size: 16px;
        font-style: normal;
        font-weight: 160;
        line-height: 100%; /* 16px */
        margin-left: 20px;
        margin-top: 10px;
        width: 240px;
        height: 32px;
    }
    .card-price, .currency{
        color: var(--main-violet, #A673D8);
        font-family: 'TT Fors', sans-serif;
        font-size: 20px;
        font-style: normal;
        font-weight: 500;
        line-height: 100%; /* 20px */
        letter-spacing: -0.8px;
    }
    .currency {
        font-size: 0.6em; /* Уменьшить шрифт вдвое относительно основного текста */
        vertical-align: super; /* Поднять символ рубля */
    }
    .card-button button{
        cursor: pointer;
        justify-content: center;
        height: 26px;
        border-radius: 20px;
        background: var(--main-violet, #A673D8);
        border: none;
        width: 113px;
        color: var(--main-grey, #232323);
        leading-trim: both;
        text-edge: cap;
        font-family: 'TT Fors', sans-serif;
        font-size: 16px;
        font-style: normal;
        font-weight: 280;
        line-height: 100%;
        transition: background-color 0.5s;
        transition: color 0.5s;
    }
    .card-button button:hover{
        background: var(--main-violet, #232323);
        color: var(--main-grey, white);
    }

    .slider-track {
            position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
    }

    .track-section {
        flex-grow: 1;
        height: 100%;
        /* Добавьте background-color: transparent; если нужно */
    }


    .price-input{
        width: 100%;
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
    }
    .price-input .field{
        display: flex;
        height: 14px;
        align-items: center;
        color: var(--main-grey, #232323);
        font-family: "TT Fors", sans-serif;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 100%; /* 14px */
    }

    .field input{
        width: 50px;
        height: 14px;
        outline: none;
        font-size: 14px;
        text-align: center;
        border: none;
        background: none;
        color: white;
        -moz-appearance: textfield;
        font-family: "TT Fors", sans-serif;
        font-style: normal;
        font-weight: 400;
        line-height: 100%;
    }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
    }
    .price-input .separator{
        width: 130px;
        display: flex;
        font-size: 19px;
        align-items: center;
        justify-content: center;
    }
    .slider-price{
        margin-top: 17px;
        height: 10px;
        position: relative;
        border-radius: 5px;
        border-radius: 50px;
        border: 1px solid var(--main-grey, #232323);
    }
    .slider-price .progress{
        height: 100%;
        left: 0%;
        right: 0%;
        position: absolute;
        border-radius: 5px;
        background: #fff;
    }
    .range-input{
        position: relative;
    }
    .range-input input{
        opacity: 0;
        position: absolute;
        width: 100%;
        height: 5px;
        top: -10px;
        background: none;
        pointer-events: none;
        -webkit-appearance: none;
        -moz-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb{
        height: 15px;
        width: 15px;
        border-radius: 50%;
        background: #fff;
        pointer-events: auto;
        -webkit-appearance: none;

    }
    input[type="range"]::-moz-range-thumb{
        height: 15px;
        width: 15px;
        border: none;
        border-radius: 50%;
        background: #17A2B8;
        pointer-events: auto;
        -moz-appearance: none;
    }
    .accept, .clear-sort{
        cursor: pointer;
        width: 113px;
        height: 26px;
        flex-shrink: 0;
        border-radius: 20px;
        background: var(--main-white, #F5F5F5);
        color: var(--main-violet, #A673D8);
        font-family: "TT Fors", sans-serif;
        font-size: 16px;
        font-style: normal;
        font-weight: 280;
        line-height: 100%;
        border: none;
        transition: 0.5s;
    }
    .clear-sort{
        width: auto;
        background: none;
        color: var(--main-grey, #232323);
        text-align: right;
        font-family: "TT Fors", sans-serif;
        font-size: 16px;
        font-style: normal;
        font-weight: 280;
        line-height: 100%;


    }
    .clear-sort:hover{
        flex-shrink: 0;
        border-radius: 20px;
        font-family: "TT Fors", sans-serif;
        font-size: 16px;
        font-style: normal;
        font-weight: 280;
        line-height: 100%;
        border: none;
    }
    .accept:hover{
        background: #000000;
        color: #F5F5F5;
    }
    .svg-tick{
        stroke: #000;
    }
    .country-block:hover .svg-tick {
        stroke: #f5f5f5;
        transition: 0.4s;
    }
    .type-block:hover .svg-tick{
        stroke: #f5f5f5;
        transition: 0.4s;
    }

    .active-sorting{
        color: #F5F5F5;
    }
    .svg-active-sorting{
        stroke: #f5f5f5;
    }

    .sort-select {
    -webkit-appearance: none;  /* Убрать стандартный стиль в Chrome и Safari */
    -moz-appearance: none;     /* Убрать стандартный стиль в Firefox */
    appearance: none;          /* Убрать стандартный стиль для стандартных браузеров */
    border-radius: 50px;
    border: 1px solid #585858;
    width: 280px;
    height: 57px;
    color: #585858;
    font-family: 'TT Fors', sans-serif;
    font-size: 18px;
    font-weight: 280;
    line-height: 18px;
    background-color: transparent;
    cursor: pointer;
    background-image: url('/static/sorticon.svg');
    background-repeat: no-repeat;
    background-position: calc(100% - 23px) center;
    padding: 0 0 0 30px; /* Подгоните отступы по необходимости */
    outline: none;
}

.sort-select:hover {
    background-color: #eaeaea;
}

/* Стиль для стрелки выпадающего списка, если используется псевдоэлемент */
.sort::after {
    content: '';
    /* Стили для кастомизации стрелки */
}

/* Обертка для select для позиционирования стрелки, если требуется */
.sort {
    position: relative;
    display: inline-block;
    width: 280px;
    height: 57px;
}

/* Для скрытия стрелки select в IE */
.sort-select::-ms-expand {
    display: none;
}
.load-more{
    margin-left: 45%;
    border: 1px solid #585858;
    width: 280px;
    height: 57px;
    color: #585858;
    font-family: 'TT Fors', sans-serif;
    font-size: 18px;
    font-weight: 280;
    line-height: 18px;
    background-color: transparent;
    cursor: pointer;
    outline: none;
    border-radius: 50px;
    margin-top: 30px;
}
.load-more:hover{
    transition: 0.4s;
    border: #A673D8;
    background: var(--main-violet, #A673D8);
    color: var(--main-grey, white);
}

.card-entrance {
  animation: entranceAnimation 0.9s ease-out forwards;
}

@keyframes entranceAnimation {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.clear-sort {
    background-image: linear-gradient(to right, transparent, transparent);
    background-repeat: no-repeat;
    background-size: 0 2px; /* Изначально линия не показывается */
    background-position: left bottom;
    padding-bottom: 2px;
    transition: background-size 0.3s ease;
    font-size: 16px; /* Или любой другой размер, который вам нужен */
    color: #232323; /* Цвет текста кнопки */
    border: none; /* Убрать стандартное оформление кнопки */
    cursor: pointer; /* Курсор в виде указателя */
}

.clear-sort:hover {
    background-image: linear-gradient(to right, #000, #000);
    background-size: 100% 1px; /* При наведении линия появляется */
}
.quantity{
    margin-top: 2px;
    font-size: 16px;
    font-family: 'TT Fors', sans-serif;
    display: block;

}
.quantity-control{
    display: flex;
    justify-content: space-between;
}


.card-button .decrease-quantity{
    width: 27px;
    height: 27px;
    background: #f5f5f5;
    border: 1px solid #b5b5b5;
}

.card-button .increase-quantity{
    width: 27px;
    height: 27px;
    background: #f5f5f5;
    border: 1px solid #b5b5b5;
}

.card-button .decrease-quantity:hover{
    border: #A673D8;
    background: #A673D8;

}
.card-button .increase-quantity:hover{
    border: #A673D8;
    background: #A673D8;

}
.footer-mobile{
    height: 200px;
    margin-right: auto;
    margin-left: auto;
    display: none;
    margin-top: 120px;
    width: 90%;
}
.market-logo{
    display: none;
}

.wrapper-menu {
    display: none;
  width: 35px;
  height: 25px;

  flex-direction: column;
  justify-content: space-between;
  cursor: pointer;
  transition: transform 330ms ease-out;
}

.wrapper-menu.open {
  transform: rotate(-45deg);
}

.line-menu {
  background-color: #fff;
  border-radius: 5px;
  width: 100%;
  height: 4px;
}

.line-menu.half {
  width: 50%;
}

.line-menu.start {
  transition: transform 330ms cubic-bezier(0.54, -0.81, 0.57, 0.57);
  transform-origin: right;
}

.open .line-menu.start {
  transform: rotate(-90deg) translateX(3px);
}

.line-menu.end {
  align-self: flex-end;
  transition: transform 330ms cubic-bezier(0.54, -0.81, 0.57, 0.57);
  transform-origin: left;
}

.open .line-menu.end {
  transform: rotate(-90deg) translateX(-3px);
}

@keyframes arrow-bounce-up {
      0%, 100% {
        transform: translateX(0);
      }
      50% {
        transform: translateY(5px);
      }
    }


.full-screen-menu {

    transition: 1s ease;
    opacity: 90%;
    position: fixed;
    top: -100%; /* Скрыть изначально */
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #232323;
    transition: top 0.3s ease-in-out;
    z-index: 1000; /* Убедитесь, что меню находится поверх других элементов */
    display: flex; /* Использование flexbox для выравнивания */
    justify-content: center; /* Центрирование содержимого по горизонтали */
    align-items: center; /* Центрирование содержимого по вертикали */
}

.header .full-screen-menu ul {
  list-style: none;
  text-align: center;
  padding: 0;
  margin-top: 50px; /* Или другое значение для отступа сверху */
}

.header .full-screen-menu ul li {
  padding: 10px 0 ;
    width: auto;
}

.header .full-screen-menu ul li a {
    text-decoration: none;
    color: white;
    font-size: 32px;
    width: auto;
}

.wrapper-menu.open + .full-screen-menu {
  top: 0; /* Показать меню */
}
.menu__box li .badge {
    display: inline-block;
    background-color: red;
    color: white;
    text-align: center;
    border-radius: 50%;
    width: 21px;
    height: 21px;
    line-height: 21px; /* Для вертикального центрирования текста */
    font-size: 12px;
    font-weight: bold;
    position: relative;
    top: -40px; /* Поднимает кружок над элементом меню */
    left: 40px; /* Сдвигает кружок к правому краю элемента меню */
 }

.badge {
    display: inline-block;
    background-color: red;
    color: white;
    text-align: center;
    border-radius: 50%;
    width: 21px;
    height: 21px;
    line-height: 21px; /* Для вертикального центрирования текста */
    font-size: 12px;
    font-weight: bold;
    position: relative;
    top: -30px; /* Поднимает кружок над элементом меню */
    left: 50px; /* Сдвигает кружок к правому краю элемента меню */
 }
.market-cards{
    display: block;
    margin-left: 20px
}
.filter-btn{
    display: none;
    -webkit-appearance: none;  /* Убрать стандартный стиль в Chrome и Safari */
    -moz-appearance: none;     /* Убрать стандартный стиль в Firefox */
    appearance: none;          /* Убрать стандартный стиль для стандартных браузеров */
    border-radius: 50px;
    border: 1px solid #585858;
    width: 180px;
    height: 57px;
    color: #585858;
    font-family: 'TT Fors', sans-serif;
    font-size: 18px;
    font-weight: 280;
    line-height: 18px;
    background-color: transparent;
    cursor: pointer;
    background-image: url('/static/filter.svg');
    background-repeat: no-repeat;
    background-position: calc(100% - 10px) center;
    padding: 0 45px 0 0; /* Подгоните отступы по необходимости */
    outline: none;
}
.type-product-flex{
    display: block;
}



@media (max-width: 1000px) {

        body {
            zoom: 140%;
        }

        .navbar {
            display: none;
        }

        .header {
            align-items: normal;
            height: 6.25em;
            width: 90%;
            zoom: 120%;
        }

        .logo {
            margin: 0;
            font-size: 1.5em;
            margin-left: 20px;
            margin-top: auto;
            margin-bottom: auto;
            height: 24px;
        }

        .market-logo {
            display: block;
        }

        .wrapper-menu {
            display: flex;
        }


        .footer {
            display: none;
        }

        .footer-mobile {
            height: 400px;
            display: block;
        }

        .footer-title {
            margin-top: 60px;
            margin-left: auto;
            margin-right: auto;
            font-size: 3em;
        }

        .footer-list {
            margin-right: auto;
            margin-left: auto;
            height: auto;
            width: 282px;
            font-family: "TT Fors", sans-serif;
            font-weight: 280;
            font-size: 1em;
            line-height: 100%;
            color: #585858;
        }

        .footer-list li{
            font-size: 2em;
        }

        .footer-phone-select {
            font-size: 1em;
            font-family: "TT Fors", sans-serif;
            font-weight: 280;
            line-height: 100%;
            color: #585858;
        }

        .footer-item {
            width: auto;
            font-family: "TT Fors", sans-serif;
            font-weight: 280;
            line-height: 100%;
            color: #585858;
        }


        .title-page{
            width: 90%;
        }
        .market{
            width: 90%;
        }
        .market-sorting{
            opacity: 0; /* Сделаем блок невидимым по умолчанию */
            transition: opacity 0.3s ease, transform 0.3s ease; /* Плавное изменение прозрачности и трансформации */
            transform: scale(0.95); /* Начальное состояние трансформации */
            display: none;
        }
        .search-sorting{
            flex-wrap: wrap;
            height: auto;
            width: 100%;
            justify-content: unset;
        }
        .market-cards{
            width: 100%;
            margin-left: 0;
        }
        .card-container{
            justify-content: space-between;
        }
        .card{
            width: 300px;
        }
        .load-more{
            font-size: 24px;
            margin-left: 30%;

        }
        .market-sorting {

            opacity: 0;
            transform: scale(0.95);
            display: none;
            position: fixed;
            width: 90%;
            height: 600px;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            z-index: 1002; /* Повысим z-index для самого окна */
            align-items: center;
            justify-content: center;
        }
        .type-card-text, .country-card-text, .price-card-text{
            font-size: 24px;
        }
        .type-card{
            width: 90%;
        }
        .count-card{
            width: 90%;
        }
        .type-card-select, .type-card-select-country{
            font-size: 24px;
        }
        .market-sorting-overlay {
            display: none;
            transition: background-color 0.3s ease; /* Плавное изменение фона */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1001; /* Затемненный фон должен быть ниже .market-sorting */
        }
        .filter-btn{
            font-size: 24px;
            display: block;
        }
        .search{
            width: 100%;
        }
        .search input[type="search"] {
            width: 100%;
            font-size: 24px;
        }
        .sort-select{
            font-size: 24px;
        }
        .card-subtitle{
            font-size: 20px;
        }
        .card-title, .card-price{
            font-size: 24px;
        }
        .quantity{
            font-size: 22px;
        }
        .increase-quantity, .decrease-quantity{
            width: 30px !important;
            height: 30px !important;
            font-size: 24px !important;
        }
        .type-product-flex{
            width: 100%;
            display: flex;
            gap: 20px;
        }
        .type-block, .type-card-select{
            width: auto !important;
        }
        hr{
            width: 90% !important;
        }
        .price-input .field, .field input {
            font-size: 24px;
            height: auto;
        }
        .price-card{
            height: auto;
            width: 90%;
        }
        .price-input{
            width: 100%;
        }
        .field input {
            width: 100px;
        }
        .slider-price {
            height: 20px;
        }
        .slider-price .progress {
            border-radius: 30px;
        }
        .button-sorting{
            height: auto;
            width: 90%;
            display: flex;
            justify-content: space-between;

        }
        .accept, .clear-sort{
            font-size: 24px;

        }
        .accept{
            height: 50px;
            width: 50%;
        }
        .clear-sort{
            width: 45%;
            height: 50px;
            text-align: center;
        }
        .clear-sort:hover {
            font-size: 24px;
        }
        .range-input input {
            height: 20px;
            top: -23px;
        }
        .currency{
            font-size: 0.9em;
        }
        .card-button button {
            font-size: 22px;
            width: 150px;
            height: 31px;
        }



    }



</style>
<title>Аптека</title>
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

<div class="header" style="display: flex; justify-content: space-between;">
    <div class="logo">
        <a href="{% url 'login' %}"><img src="">clinic slimness</a>
    </div>
    <div class="navbar">
        <ul class="menu__box">
            <li><a href="{% url 'login' %}">главная</a></li>
            <li><a class="active" href="{% url 'market' %}">аптека</a></li>
            <li><a href="{% url 'about' %}">о нас</a></li>
            <li><a href="{% url 'service'%}">услуги</a></li>
            <li><a href="{% url 'cart' %}" style="height: 25px">корзина<span class="badge" style="display: none;">0</span></a></li>
        </ul>
    </div>
    <div style="display: flex; gap: 25px; margin-right: 20px; align-items: center;">
        <a href="{% url 'cart' %}">
            <div class="market-logo">
               <span class="badge" style="display: none;">0</span>
                <svg width="35" height="35" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M16 16C16.5304 16 17.0391 16.2107 17.4142 16.5858C17.7893 16.9609 18 17.4696 18 18C18 18.5304 17.7893 19.0391 17.4142 19.4142C17.0391 19.7893 16.5304 20 16 20C15.4696 20 14.9609 19.7893 14.5858 19.4142C14.2107 19.0391 14 18.5304 14 18C14 16.89 14.89 16 16 16ZM0 0H3.27L4.21 2H19C19.2652 2 19.5196 2.10536 19.7071 2.29289C19.8946 2.48043 20 2.73478 20 3C20 3.17 19.95 3.34 19.88 3.5L16.3 9.97C15.96 10.58 15.3 11 14.55 11H7.1L6.2 12.63L6.17 12.75C6.17 12.8163 6.19634 12.8799 6.24322 12.9268C6.29011 12.9737 6.3537 13 6.42 13H18V15H6C5.46957 15 4.96086 14.7893 4.58579 14.4142C4.21071 14.0391 4 13.5304 4 13C4 12.65 4.09 12.32 4.24 12.04L5.6 9.59L2 2H0V0ZM6 16C6.53043 16 7.03914 16.2107 7.41421 16.5858C7.78929 16.9609 8 17.4696 8 18C8 18.5304 7.78929 19.0391 7.41421 19.4142C7.03914 19.7893 6.53043 20 6 20C5.46957 20 4.96086 19.7893 4.58579 19.4142C4.21071 19.0391 4 18.5304 4 18C4 16.89 4.89 16 6 16ZM15 9L17.78 4H5.14L7.5 9H15Z" fill="#F5F5F5" />
                </svg>
            </div>
        </a>
        <div class="wrapper-menu">
          <div class="line-menu half start"></div>
          <div class="line-menu"></div>
          <div class="line-menu half end"></div>
        </div>
    </div>
    <div class="full-screen-menu" data-aos="fade-down-left" data-aos-duration="800" data-aos-once="true">
        <ul class="menu__box" style="display: block; width: 20%">
            <li><a href="{% url 'login' %}">главная</a></li>
            <li><a href="{% url 'market' %}">аптека</a></li>
            <li><a href="{% url 'about' %}">о нас</a></li>
            <li><a href="{% url 'service'%}">услуги</a></li>
            <li><a href="{% url 'cart' %}">корзина</a></li>
        </ul>
    </div>

</div>



<div class="title-page">
    <div class="title-page-text">наша продукция</div>
</div>
<div class="market">
    <div style="display: flex">
        <div class="market-sorting-overlay" style="display: none;"></div>
        <div class="market-sorting" >
            <div class="type-card">
                <div class="type-card-text">Тип</div>
                <div class="type-product-flex">
                    <div style="width: 187px;height: 36px; display: flex; margin-top: 15px" class="type-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="9" viewBox="0 0 12 9" fill="none" style="margin-top: 3px; margin-right: 7px">
                      <path d="M1 4.13726L4.46154 7.66667L11 1" class="svg-tick" stroke-linecap="square"/>
                    </svg>
                    <div class="type-card-select" data-type="medicine">фармацевтические препараты</div>
                </div>
                    <div style="width: 187px;height: 36px; display: flex; margin-top: 15px" class="type-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="9" viewBox="0 0 12 9" fill="none" style="margin-top: 3px; margin-right: 7px">
                      <path d="M1 4.13726L4.46154 7.66667L11 1" class="svg-tick" stroke-linecap="square"/>
                    </svg>
                    <div class="type-card-select" data-type="supplement">БАДы</div>
                </div>
                </div>

            </div>
            <hr style="width: 240px; margin-left: auto;margin-right: auto; border-color: black; margin-top: 30px; margin-bottom: 30px;height:1px;border:none;color:#333;background-color:#333;">
            <div class="count-card">
                <div class="country-card-text">Страна</div>
                <div style="display: flex; flex-wrap: wrap; gap: 15px 40px; margin-top: 15px;">
                    {% for country in countries %}
                        <div style="display: flex;  width: auto" class="country-block">
                            <svg class="svg-tick" xmlns="http://www.w3.org/2000/svg" width="12" height="9" viewBox="0 0 12 9" fill="none" style="margin-top: 3px; margin-right: 7px">
                              <path d="M1 4.13726L4.46154 7.66667L11 1" stroke-linecap="square"/>
                            </svg>
                            <div class="type-card-select-country"  data-country="{{ country }}">{{ country }}</div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <hr style="width: 240px; margin-left: auto;margin-right: auto; border-color: black; margin-top: 30px; margin-bottom: 30px;height:1px;border:none;color:#333;background-color:#333;">
            <div class="price-card">
                <div class="price-card-text">Цена</div>

                <div class="slider-price">
                    <div class="progress"></div>
                </div>
                <div class="range-input">
                    <input type="range" class="range-min" min="0" max="50000" value="0" step="200">
                    <input type="range" class="range-max" min="0" max="50000" value="50000" step="100">
                </div>
                <div class="price-input">
                    <div class="field">
                        <span>от</span>
                        <input type="number" class="input-min" value="0">
                        <span>р.</span>
                    </div>

                    <div class="field">
                        <span>до</span>
                        <input type="number" class="input-max" value="50000">
                        <span>р.</span>
                    </div>
                </div>

            </div>
            <hr style="width: 240px; margin-left: auto;margin-right: auto; border-color: black; margin-top: 30px; margin-bottom: 30px;height:1px;border:none;color:#333;background-color:#333;">
            <div class="button-sorting" style="margin-left: 19px">
                <button type="button" class="accept">подтвердить</button>
                <button type="button" class="clear-sort" onclick="resetForm()">очистить выбор</button>
            </div>
         </div>
        <div class="market-cards" style="">
            <div class="search-sorting">
                <div class="search">
                    <input type="search" placeholder="Поиск продукции по категории">
                </div>
                <div class="sort">
                    <select class="sort-select" name="sort-order">
                        <option value="asc">По возрастанию</option>
                        <option value="desc">По убыванию</option>
                    </select>
                </div>
                <button id="filter-btn" class="filter-btn">Фильтры</button>
            </div>
            <div class="card-container">
                {% include 'product_cards.html' with products=first_three_products %}
            </div>

        </div>

    </div>
</div>


<button class="load-more" id="load-more">Загрузить еще</button>
<div class="footer" id="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h2 class="footer-title red">clinic slimness</h2>
        </div>
        <div style="width: 0px;height: 122px; border: 1px #232323 solid"></div>
        <div class="footer-section">
            <h3 class="footer-heading">наши услуги</h3>
            <ul class="footer-list">
                <li class="footer-item">услуга 1</li>
                <li class="footer-item">услуга 2</li>
                <li class="footer-item">услуга 3</li>
            </ul>
        </div>
        <div style="width: 0px; height: 122px; border: 1px #232323 solid"></div>
        <div class="footer-section">
            <h3 class="footer-heading">компания</h3>
            <ul class="footer-list">
                <li class="footer-item">о нас</li>
                <li class="footer-item">аптека</li>
                <li class="footer-item">контакты</li>
            </ul>
        </div>
        <div style="width: 0px;height: 122px; border: 1px #232323 solid"></div>
        <div class="footer-section">
            <h3 class="footer-heading">контакты</h3>
            <ul class="footer-list">
                <li class="footer-item">
                    <!-- Выпадающий список телефонных номеров -->
                    <select class="footer-phone-select" onchange="location = this.value;">
                        <option value="tel:+74956080101">+7 495 608-01-01</option>
                        <option value="tel:+74956077950">+7 495 607-79-50</option>
                        <option value="tel:+74956073701">+7 495 607-37-01</option>
                        <option value="tel:+74955438384">+7 495 543-83-84</option>
                    </select>
                </li>
                <li class="footer-item"><a href="mailto:info@medicsel.ru" style="color:#232323;">info@medicsel.ru</a></li>
                <li class="footer-item" style="width: auto">г. Москва, пер. Малый Козловский, д. 6</li>
            </ul>
        </div>
    </div>
</div>


<div class="footer-mobile">
    <a href="#main-sector">
        <svg style="display: block; margin-left: auto; animation: arrow-bounce-up 1s infinite; cursor: pointer;" width="40" height="40" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M10 20C4.47059 20 0 15.5294 0 10C0 4.47059 4.47059 0 10 0C15.5294 0 20 4.47059 20 10C20 15.5294 15.5294 20 10 20ZM10 1.17647C5.11765 1.17647 1.17647 5.11765 1.17647 10C1.17647 14.8824 5.11765 18.8235 10 18.8235C14.8824 18.8235 18.8235 14.8824 18.8235 10C18.8235 5.11765 14.8824 1.17647 10 1.17647Z" fill="#585858" />
      <path d="M14.8824 10.9996L10.0001 6.11727L5.11772 10.9996L4.29419 10.1761L10.0001 4.47021L15.706 10.1761L14.8824 10.9996Z" fill="#585858" />
      <path d="M9.41168 5.29395H10.5882V15.2939H9.41168V5.29395Z" fill="#585858" />
    </svg>
    </a>

    <hr>
    <div class="footer-section">
        <h2 class="footer-title red">clinic slimness</h2>
    </div>
    <ul class="footer-list">
        <li class="footer-item">
            <!-- Выпадающий список телефонных номеров -->
            <select class="footer-phone-select" onchange="location = this.value;">
                <option value="tel:+74956080101">+7 495 608-01-01</option>
                <option value="tel:+74956077950">+7 495 607-79-50</option>
                <option value="tel:+74956073701">+7 495 607-37-01</option>
                <option value="tel:+74955438384">+7 495 543-83-84</option>
            </select>
        </li>
        <li class="footer-item"><a href="mailto:info@medicsel.ru" style="color: #585858;">info@medicsel.ru</a></li>

    </ul>
</div>

<script>
  AOS.init();
</script>


<script>

document.getElementById('filter-btn').addEventListener('click', function() {
    var modal = document.querySelector('.market-sorting');
    var body = document.body;
    var overlay = document.querySelector('.market-sorting-overlay');
    modal.style.display = 'block';
    overlay.style.display = 'block';
    body.style.overflow = 'hidden';

    // Добавляем небольшую задержку перед анимацией
    setTimeout(() => {
        modal.style.opacity = 1;
        modal.style.transform = 'scale(1)';
        overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
    }, 300);
});

document.querySelector('.accept').addEventListener('click', function() {
    var modal = document.querySelector('.market-sorting');
    var body = document.body;
    var overlay = document.querySelector('.market-sorting-overlay');
    modal.style.opacity = 0;
    modal.style.transform = 'scale(0.95)';
    body.style.overflow = '';
    overlay.style.backgroundColor = 'rgba(0, 0, 0, 0)';
    setTimeout(() => {
        modal.style.display = 'none';
        overlay.style.display = 'none';
    }, 300); // Задержка должна соответствовать продолжительности анимации
});
document.querySelector('.market-sorting-overlay').addEventListener('click', function() {
    var modal = document.querySelector('.market-sorting');
    var body = document.body;
    var overlay = document.querySelector('.market-sorting-overlay');
    modal.style.opacity = 0;
    modal.style.transform = 'scale(0.95)';
    body.style.overflow = '';
    overlay.style.backgroundColor = 'rgba(0, 0, 0, 0)';
    setTimeout(() => {
        modal.style.display = 'none';
        overlay.style.display = 'none';
    }, 300);
});


</script>

<script>
// Этот код можно разместить в общем файле скриптов или в базовом шаблоне
document.addEventListener('DOMContentLoaded', function() {
    updateProductCount();
});

// Функция getCartCount() должна быть адаптирована под ваш способ хранения информации о корзине
// Здесь просто примерная реализация
function getCartCount() {
    // Это предполагает, что у вас есть ключи в localStorage типа "product_1", "product_2" и т.д.
    return Object.keys(localStorage)
                 .filter(key => key.startsWith('product_'))
                 .length;
}

function updateProductCount() {
    const count = getCartCount();
    const badgeElements = document.querySelectorAll('.badge');

    badgeElements.forEach(badge => {
        badge.textContent = count;
        badge.style.display = count > 0 ? 'inline-block' : 'none';
    });
}

// Обновите остальные функции в соответствии с вашей логикой корзины
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Первоначальная загрузка всех товаров
    sendAjaxRequest();

    // Обработка клика на элементах фильтрации типа и страны
    document.querySelectorAll('.type-card-select, .type-card-select-country').forEach(item => {
        item.addEventListener('click', function() {
            this.classList.toggle('active-sorting');
            toggleSvgTick(this);
            sendAjaxRequest(); // Обновление товаров при изменении фильтров
        });
    });

    // Обработка ввода в поле поиска
    document.querySelector('.search input[type="search"]').addEventListener('input', function() {
        sendAjaxRequest(); // Обновление товаров при вводе текста в поиск
    });

    document.querySelector('.sort-select').addEventListener('change', function() {
        sendAjaxRequest(); // Обновление товаров при изменении сортировки
    });

    // Обработка изменений в слайдере цены
    document.querySelectorAll('.range-min, .range-max').forEach(input => {
        input.addEventListener('input', function() {
            let min = document.querySelector('.range-min').value;
            let max = document.querySelector('.range-max').value;
            document.querySelector('.input-min').value = min;
            document.querySelector('.input-max').value = max;
            sendAjaxRequest(); // Обновление товаров при изменении диапазона цен
        });
    });

    // Обработка клика на кнопке "очистить выбор"
    document.querySelector('.clear-sort').addEventListener('click', function() {
        document.querySelectorAll('.active-sorting').forEach(el => el.classList.remove('active-sorting'));
        document.querySelectorAll('.svg-active-sorting').forEach(el => el.classList.remove('svg-active-sorting'));
        resetPriceFilters();
        sendAjaxRequest(); // Обновление товаров при сбросе фильтров
    });

    // Обработка выбора сортировки
    document.querySelectorAll('.sort-option').forEach(option => {
        option.addEventListener('click', function() {
            document.querySelectorAll('.sort-option').forEach(opt => opt.classList.remove('active'));
            this.classList.add('active');
            sendAjaxRequest(); // Обновление товаров при изменении сортировки
        });
    });
});

let currentPage = 1;
let totalPages = 1;  // Переменная для хранения общего количества страниц

document.getElementById('load-more').addEventListener('click', function() {
    if (currentPage < totalPages) {
        currentPage++;
        sendAjaxRequest(true); // true означает, что это подгрузка дополнительных товаров
    }
});

function clearAnimationClasses() {
    document.querySelectorAll('.card').forEach(card => card.classList.remove('card-entrance'));
}

document.querySelectorAll('.page-link').forEach(pageLink => {
    pageLink.addEventListener('click', function() {
        let page = this.getAttribute('data-page');
        sendAjaxRequest(false, page); // false означает, что это не подгрузка дополнительных товаров
        initializeSliders();
    });
});

function isProductAlreadyDisplayed(productId) {
    return !!document.querySelector(`.card[data-product-id="${productId}"]`);
}

function initializeProductControls() {
    document.querySelectorAll('.card').forEach(card => {
        const productId = card.dataset.productId;
        const storedQuantity = localStorage.getItem(`product_${productId}`);
        if (storedQuantity) {
            showQuantityControl(productId, storedQuantity);
        } else {
            const cardButtonDiv = card.querySelector('.card-button');
            cardButtonDiv.innerHTML = `<button onclick="toggleAddToCartButton('${productId}')">в корзину</button>`;
        }
    });
}
// Функция для отправки запроса с фильтрацией и сортировкой
function sendAjaxRequest(isLoadMore = false, page = 1) {
    clearAnimationClasses();
    let searchQuery = document.querySelector('.search input[type="search"]').value;
    let types = getActiveFilters('type-card-select');
    let countries = getActiveFilters('type-card-select-country');
    let minPrice = document.querySelector('.input-min').value;
    let maxPrice = document.querySelector('.input-max').value;
    let sortOrder = document.querySelector('.sort-select').value; // Получаем значение выбранного порядка сортировки


    let params = new URLSearchParams();

    types.forEach(type => params.append('type', type));
    countries.forEach(country => params.append('country', country));
    params.append('min_price', minPrice);
    params.append('max_price', maxPrice);
    params.append('search', searchQuery);
    params.append('sort', sortOrder);


    if (isLoadMore) {
        params.append('page', currentPage);
    } else {
        params.append('page', page);
    }

    fetch(`/market/?${params.toString()}`, {
        headers: {
            'X-Requested-With': 'XMLHttpRequest'
        }
    })

    .then(response => response.json())
    .then(data => {
        totalPages = data.num_pages;  // Обновляем общее количество страниц
        let container = document.querySelector('.card-container');
        if (isLoadMore) {
            container.insertAdjacentHTML('beforeend', data.html);
        } else {
            container.innerHTML = data.html;
            currentPage = 1;  // Сброс к первой странице при изменении фильтров
        }
        container.querySelectorAll('.card').forEach(card => card.classList.add('card-entrance'));
        initializeSliders(); // Инициализация слайдеров для новых элементов
        initializeProductControls();
    });
}

function toggleSvgTick(element) {
    const parentBlock = element.closest('.type-block, .country-block');
    if (parentBlock) {
        const svgElement = parentBlock.querySelector('.svg-tick');
        if (svgElement) {
            svgElement.classList.toggle('svg-active-sorting');
        }
    }
}

function resetPriceFilters() {
    document.querySelector('.input-min').value = 0;
    document.querySelector('.input-max').value = 50000;
    document.querySelector('.range-min').value = 0;
    document.querySelector('.range-max').value = 50000;

    let progress = document.querySelector('.progress');
    if (progress) {
        progress.style.left = '0%';
        progress.style.right = '0%';
    }
}



// Функция для получения активного фильтра
function getActiveFilters(className) {
    let filters = [];
    document.querySelectorAll(`.${className}.active-sorting`).forEach(element => {
        filters.push(element.getAttribute('data-type') || element.getAttribute('data-country'));
    });
    return filters;
}

// Добавьте обработчик для кнопки подтверждения
document.querySelector('.accept').addEventListener('click', function() {
    sendAjaxRequest();
});

function initializeSliders() {
    document.querySelectorAll('.card').forEach(card => {
        let slides = card.querySelectorAll('.slide');
        let indicators = card.querySelectorAll('.indicator');
        let trackSections = card.querySelectorAll('.track-section');
        let currentSlide = 0;

        function updateSlider(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            indicators.forEach(indicator => indicator.classList.remove('active'));

            slides[index].classList.add('active');
            indicators[index].classList.add('active');
            currentSlide = index; // Обновляем текущий слайд
        }

        trackSections.forEach((section, index) => {
            section.addEventListener('mousemove', () => {
                if (currentSlide !== index) {
                    updateSlider(index);
                }
            });
        });

        indicators.forEach((indicator, index) => {
            indicator.addEventListener('mouseenter', () => {
                updateSlider(index);
            });
        });

        updateSlider(currentSlide); // Инициализация слайдера
    });
}

// Инициализируем слайдеры впервые при загрузке страницы
initializeSliders();
</script>

<script>
const rangeInput = document.querySelectorAll(".range-input input"),
priceInput = document.querySelectorAll(".price-input input"),
range = document.querySelector(".slider-price .progress");
let priceGap = 1000;

priceInput.forEach(input =>{
    input.addEventListener("input", e =>{
        let minPrice = parseInt(priceInput[0].value),
        maxPrice = parseInt(priceInput[1].value);

        if((maxPrice - minPrice >= priceGap) && maxPrice <= rangeInput[1].max){
            if(e.target.className === "input-min"){
                rangeInput[0].value = minPrice;
                range.style.left = ((minPrice / rangeInput[0].max) * 100) + "%";
            }else{
                rangeInput[1].value = maxPrice;
                range.style.right = 100 - (maxPrice / rangeInput[1].max) * 100 + "%";
            }
        }
    });
});

rangeInput.forEach(input =>{
    input.addEventListener("input", e =>{
        let minVal = parseInt(rangeInput[0].value),
        maxVal = parseInt(rangeInput[1].value);

        if((maxVal - minVal) < priceGap){
            if(e.target.className === "range-min"){
                rangeInput[0].value = maxVal - priceGap
            }else{
                rangeInput[1].value = minVal + priceGap;
            }
        }else{
            priceInput[0].value = minVal;
            priceInput[1].value = maxVal;
            range.style.left = ((minVal / rangeInput[0].max) * 100) + "%";
            range.style.right = 100 - (maxVal / rangeInput[1].max) * 100 + "%";
        }
    });
});
</script>

<script>
document.querySelectorAll('.card').forEach(card => {
    let slides = card.querySelectorAll('.slide');
    let indicators = card.querySelectorAll('.indicator');
    let trackSections = card.querySelectorAll('.track-section');
    let currentSlide = 0;

    function updateSlider(index) {
        slides.forEach(slide => slide.classList.remove('active'));
        indicators.forEach(indicator => indicator.classList.remove('active'));

        slides[index].classList.add('active');
        indicators[index].classList.add('active');
        currentSlide = index; // Обновляем текущий слайд
    }
    // Обработка перемещения курсора на track-sections
trackSections.forEach((section, index) => {
    section.addEventListener('mousemove', () => {
        if (currentSlide !== index) {
            updateSlider(index);
        }
    });
});

// Обработка наведения на индикаторы
indicators.forEach((indicator, index) => {
    indicator.addEventListener('mouseenter', () => {
        updateSlider(index);
    });
});

// Инициализация слайдера
updateSlider(currentSlide);
});
</script>

<script>
function showQuantityControl(productId, quantity) {
    const card = document.querySelector(`.card[data-product-id="${productId}"]`);
    const cardButtonDiv = card.querySelector('.card-button');

    const quantityControlHTML = `
        <div class="quantity-control" style="width: 100px;">
            <button class="decrease-quantity" style="">–</button>
            <span class="quantity">${quantity}</span>
            <button class="increase-quantity" style="">+</button>
        </div>
    `;

    cardButtonDiv.innerHTML = quantityControlHTML;

    const increaseButton = cardButtonDiv.querySelector('.increase-quantity');
    const decreaseButton = cardButtonDiv.querySelector('.decrease-quantity');
    const quantitySpan = cardButtonDiv.querySelector('.quantity');

    increaseButton.addEventListener('click', () => {
        let currentQuantity = parseInt(quantitySpan.innerText);
        currentQuantity++;
        quantitySpan.innerText = currentQuantity;
        localStorage.setItem(`product_${productId}`, currentQuantity);
        updateProductCount(); // Обновляем badge после увеличения количества
    });

    decreaseButton.addEventListener('click', () => {
        let currentQuantity = parseInt(quantitySpan.innerText);
        if (currentQuantity > 1) {
            currentQuantity--;
            quantitySpan.innerText = currentQuantity;
            localStorage.setItem(`product_${productId}`, currentQuantity);
        } else {
            cardButtonDiv.innerHTML = `<button onclick="toggleAddToCartButton('${productId}')">в корзину</button>`;
            localStorage.removeItem(`product_${productId}`);
        }
        updateProductCount(); // Обновляем badge после уменьшения количества
    });
}

function toggleAddToCartButton(productId) {
    const storedQuantity = localStorage.getItem(`product_${productId}`);
    if (storedQuantity) {
        showQuantityControl(productId, storedQuantity);
    } else {
        localStorage.setItem(`product_${productId}`, 1);
        showQuantityControl(productId, 1);
    }
    updateProductCount();
}

document.addEventListener('DOMContentLoaded', () => {
    initializeProductControls();
});
</script>


<script>
var wrapperMenu = document.querySelector('.wrapper-menu');
var fullScreenMenu = document.querySelector('.full-screen-menu');
var header = document.querySelector('.header'); // Получаем элемент header
var body = document.body;

wrapperMenu.addEventListener('click', function() {
  wrapperMenu.classList.toggle('open');
  if (wrapperMenu.classList.contains('open')) {
        wrapperMenu.style.height = '33px';
        fullScreenMenu.style.opacity='90%'
        fullScreenMenu.style.top = '112px'; // Показать меню
        body.style.overflow = 'hidden'; // Отключить прокрутку
        header.style.width = '100%'; // Устанавливаем ширину header на 100%
        header.style.borderRadius = '0'; // Устанавливаем border-radius header на 0
        header.style.top="0";
        header.style.marginTop="0";
  } else {
        wrapperMenu.style.height  = '25px';
        fullScreenMenu.style.top = '-100%'; // Скрыть меню
        body.style.overflow = ''; // Включить прокрутку обратно
        header.style.width = '90%'; // Вернуть начальную ширину
        header.style.borderRadius = '20px'; // Вернуть начальный border-radius
        fullScreenMenu.style.opacity='0%'
        header.style.top="10";
        header.style.marginTop="10px";
  }
});
</script>
{% endblock %}